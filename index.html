<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="manifest" href="/manifest.json" /> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/touch-icon/logo-76.png" /> <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/touch-icon/logo-120.png" /> <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/touch-icon/logo-152.png" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/touch-icon/logo-180.png" /> <meta name="msapplication-square70x70logo" content="/assets/images/touch-icon/logo-70.png" /> <meta name="msapplication-square150x150logo" content="/assets/images/touch-icon/logo-150.png" /> <meta name="msapplication-square310x310logo" content="/assets/images/touch-icon/logo-310.png" /> <!-- keywords not used by google but other search engines might still use --> <meta name="keywords" content="Napkin, BigQuery, Postgres, SQL, BigData, Data Scientist, Data Engineer, Analytics" /> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>About | docs</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="About" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="About Napkin, its features, philosphy, goals, and reasons why it was created." /> <meta property="og:description" content="About Napkin, its features, philosphy, goals, and reasons why it was created." /> <link rel="canonical" href="https://soostone.github.io/" /> <meta property="og:url" content="https://soostone.github.io/" /> <meta property="og:site_name" content="docs" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="About" /> <script type="application/ld+json"> {"@type":"WebSite","url":"https://soostone.github.io/","description":"About Napkin, its features, philosphy, goals, and reasons why it was created.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://soostone.github.io/assets/images/logo-and-name.svg"}},"headline":"About","dateModified":"2021-08-25T11:50:00+00:00","name":"docs","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="site-super-header"> <div class="site-logo"></div> <a class="link-button active" href="#">Documentation</a> <a class="link-button" href="#">Community</a> <a class="link-button" href="#">Features</a> <a class="link-button" href="#">Use Cases</a> <span class="gradient-border"> <a class="link-button " href="#">Install</a> </span> </div> <div class="side-bar" style="display: none;"> <div class="site-header"> <a href="https://soostone.github.io/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"> <li class="nav-list-item" style="display: none;"> <a class="nav-list-link" href="https://napkinweb.webflow.io/"> Napkin product </a> </li><li class="nav-list-item"><a href="https://soostone.github.io/" class="nav-list-link"> About </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/getting-started/" class="nav-list-link"> Getting Started </a> <ul><li> <a href="/getting-started/#installation" class="nav-list-link"> Installation </a> </li><li> <a href="/getting-started/#key-features" class="nav-list-link"> Hello world </a> </li></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/tutorial/" class="nav-list-link"> Tutorial </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/tips-and-tricks/" class="nav-list-link"> Tips and Tricks </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/user-manual/" class="nav-list-link"> User Manual </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/haddock/" class="nav-list-link"> Haddock </a> <ul></ul></li></ul> </nav> </div> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search docs" aria-label="Search docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main" id="top"> <div class="side-bar"> <ul class="nav-list"> <li class="nav-list-item" style="display: none;"> <a class="nav-list-link" href="https://napkinweb.webflow.io/"> Napkin product </a> </li><li class="nav-list-item"><a href="https://soostone.github.io/" class="nav-list-link"> About </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/getting-started/" class="nav-list-link"> Getting Started </a> <ul><li> <a href="/getting-started/#installation" class="nav-list-link"> Installation </a> </li><li> <a href="/getting-started/#key-features" class="nav-list-link"> Hello world </a> </li></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/tutorial/" class="nav-list-link"> Tutorial </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/tips-and-tricks/" class="nav-list-link"> Tips and Tricks </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/user-manual/" class="nav-list-link"> User Manual </a> <ul></ul></li><li class="nav-list-item"><a href="https://soostone.github.io/haddock/" class="nav-list-link"> Haddock </a> <ul></ul></li></ul> </div> <div class="main-content-lspander"></div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="what-is-napkin"> <a href="#what-is-napkin" class="anchor-heading" aria-labelledby="what-is-napkin"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is Napkin </h1> <p>Napkin is a command line application that executes data pipelines of all sizes, backed by a feature-rich Haskell library offering programmatic freedom. It’s lightweight, offers a quick start for new projects and yet scales to massive data pipelines with powerful meta-programming possibilities.</p> <p>Napkin has a broad vision in making life easier for data scientists and engineers, encapsulating a large portion of the data engineering landscape. It therefore bundles several key features together:</p> <ol> <li> <p>A consumer-grade Command Line Interface (CLI) that acts as the single point of entry for all typical workflows of data engineering and pipeline curation. The <code class="language-plaintext highlighter-rouge">napkin</code> app can refresh entire data pipelines, re-create individual tables, validate/typecheck pipelines in seconds, export dependency graphs and more.</p> </li> <li> <p>A multi-backend (w.g. BigQuery and Redshift) database runtime environment that provides for all key capabilities in executing a modern data pipeline, including interacting the database (see what’s there, query tables, create/recreate/update tables, etc.), performing runtime unit-tests/assertions, logging, timing and interacting with the outside world.</p> </li> <li> <p>A built-in DAG orchestrator that can automatically detect all the debendency relationships in a data pipeline (e.g. 30+ tables) and perform the pipeline updates in the correct order. Data pipelines are called “Spec”s in napkin and ship with all batteries included: Ability to rewrite table destinations into different schemas/datasets for different environments (e.g. devel vs. prod), mass-prefixing/renaming tables, setting different “Refresh Strategies” for each table (e.g. update daily vs. only update when missing), a wide range of data unit-tests (e.g. table must be unique by columns X+Y) that are automatically performed each time the table is updated.</p> </li> <li> <p>For the power user, a SQL wrapper DSL in Haskell that stays as close as possible to SQL, without any intermediarey object or relational mappings. This DSL looks almost like regular SQL, but allows sophisticated programmatic manipulation and composition of SQL queries and statements. Napkin can parse regular SQL into this internal DSL, perform any desired manipulations and render it back out as regular SQL.</p> </li> <li> <p>A sophisticated SQL meta-programming environment that accelerates modern data engineering efforts. Napkin users can interweave several options for crafting SQL as they see fit, even in the same file. These options include:</p> </li> </ol> <ul> <li> <p>Writing plain SQL files without any low-grade templating noise. Napkin will still auto-detect all depedencies and make the pipeline “just work”.</p> </li> <li> <p>Using lifthweight variable substitutions in <code class="language-plaintext highlighter-rouge">.sql</code> files via Mustache templates.</p> </li> <li> <p>Using sophisticated <code class="language-plaintext highlighter-rouge">#{sexp} ... #{/sexp}</code> splices directly in <code class="language-plaintext highlighter-rouge">.sql</code> files to write Haskell code that dynamically generates SQL fragments on the fly.</p> </li> <li> <p>Expressing entire queries directly using napkin’s Haskell DSL, often used for dynamic generation of SQL code based on complex logic. For example, prediction trees can be rendered into SQL this way, sometimes generated 100K LOC SQL files from a single model.</p> </li> </ul> <h1 id="napkins-philosophy"> <a href="#napkins-philosophy" class="anchor-heading" aria-labelledby="napkins-philosophy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Napkin’s Philosophy </h1> <p>Napkin was created to capitalize on an opportunity we noticed back in 2015 to (massively) accelerate our team’s data engineering capabilities and yet make the resulting codebases way more sustainable/maintainable. At the time, we were drowning in the complexity of custom Hadoop MapReduce programs, Spark programs and repositories of ad-hoc SQL scripts targeted on Redshift/Hive/etc at the time. We created napkin because we sorely needed something more practical and reliable for our own work.</p> <p>Over time, the opportunities we saw got crystallized into a set of philosophies we can articulate about what napkin is trying to achieve and whether it may be the huge catalyst for your team that it has been for us:</p> <h2 id="base-as-much-data-compute-as-possible-on-sql"> <a href="#base-as-much-data-compute-as-possible-on-sql" class="anchor-heading" aria-labelledby="base-as-much-data-compute-as-possible-on-sql"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Base as much data compute as possible on SQL </h2> <p>Despite its age and missed opportunities, SQL code is declarative, functional and highly expressive. It’s easy to construct even for non-engineer data scientists/analysts and tends to offer good “equational reasoning”. It’s constraied just the right amount that business logic does not go “off the hook” like it can in typical programming languages like Python, R, Scala, etc. Once written and tested, SQL tends to produce reliable results.</p> <p>Over the years, we have found almost all data engineering efforts outside of SQL to be error-prone, hard to grow and expensive (e.g. needs data engineers) to maintain over time.</p> <p>If you can imagine how a table should be structured and express that table as a query in SQL, you can use napkin to engineer a pipeline.</p> <h2 id="do-as-much-compute-as-possible-on-modern-analytics-dbs-like-bigqueryredshiftsnowflake"> <a href="#do-as-much-compute-as-possible-on-modern-analytics-dbs-like-bigqueryredshiftsnowflake" class="anchor-heading" aria-labelledby="do-as-much-compute-as-possible-on-modern-analytics-dbs-like-bigqueryredshiftsnowflake"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Do as much compute as possible on modern analytics DBs like BigQuery/Redshift/Snowflake </h2> <p>Napkin aims to be a data engineering superpower even for very small teams. This is accomplished in large part by leaning on the amazing compute capabilities of modern analytics databases like BigQuery. Napkin’s creation goes back to our realization that if we could express even a very complex computation in SQL on these databases, no matter how convoluted, they would get the work done in astonishingly litte time for minimal cost.</p> <p>In our work, we have produced numerous 200,000+ LOC SQL queries using napkin’s metaprogramming capabilities that run within minutes on databases like Amazon Redshift and Google’s BigQuery. Fun fact: BigQuery has a ~1M character limit on queries, which we sometimes bypass by breaking complex queries into parts and joining them up / unioning them later. Even this transformation can be done automatically for you by napkin in certain cases!</p> <h2 id="abstract-and-reuse-complex-transformations-where-possible"> <a href="#abstract-and-reuse-complex-transformations-where-possible" class="anchor-heading" aria-labelledby="abstract-and-reuse-complex-transformations-where-possible"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Abstract and reuse complex transformations where possible </h2> <h2 id="data-pipelines-should-be-declarative-and-managed-on-git"> <a href="#data-pipelines-should-be-declarative-and-managed-on-git" class="anchor-heading" aria-labelledby="data-pipelines-should-be-declarative-and-managed-on-git"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data pipelines should be declarative and managed on Git </h2> <h2 id="data-pipelines-should-be-regenerative"> <a href="#data-pipelines-should-be-regenerative" class="anchor-heading" aria-labelledby="data-pipelines-should-be-regenerative"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data pipelines should be regenerative </h2> <h2 id="data-pipeline-dev-should-be-lightweight-on-bare-laptops"> <a href="#data-pipeline-dev-should-be-lightweight-on-bare-laptops" class="anchor-heading" aria-labelledby="data-pipeline-dev-should-be-lightweight-on-bare-laptops"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data pipeline dev should be lightweight on bare laptops </h2> <h2 id="doctrine-of-extreme-convenience"> <a href="#doctrine-of-extreme-convenience" class="anchor-heading" aria-labelledby="doctrine-of-extreme-convenience"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Doctrine of extreme convenience </h2> <p>With napkin, we aim to make various data engineering and data science workflows so easy to perform that practitioners change their behavior to lean on them more frequently. We believe that speed and convenience without sacrificing correctness and reliability makes a huge difference in sustaining data ecosystem effectiveness.</p> <h1 id="napkins-benefits"> <a href="#napkins-benefits" class="anchor-heading" aria-labelledby="napkins-benefits"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Napkin’s Benefits </h1> <p>Here’s our best description of benefits you can expect after you’ve gotten a hang of napkin:</p> <ol> <li> <p>You’ll be able to see and manage your entire data pipeline in a simple codebase, in declarative fashion and in source control - just like any modern software project.</p> </li> <li> <p>You’ll always be able to “blow away and fully refresh” your entire pipeline from raw data at the push of a button - recovering from mistakes will be a breeze.</p> </li> <li> <p>Your data pipeline will entirely rely on the power of your backend database, whatever it may be. The likes of BigQuery for large datasets or Postgres (or even Sqlite) when you can get away with it on small data. You won’t rely on error prone Python pandas code, your own custom data processing application and similar constructs that are hard to grow/maintain and ensure correctness over time.</p> </li> <li> <p>Your data will have actual unit tests that will confirm correctness with each update. (Example: Making sure you don’t double count sales)</p> </li> <li> <p>You’ll benefit from tens of combinators we ship with napkin, such as incrementally updating large tables, column-to-row transformations, union-in same-structured tables into one, etc. As we improve napkin, you’ll get all that for free.</p> </li> <li> <p>You’ll be able to implement your own clever SQL meta-programming to express logic that’d be too tedius to do in plain SQL. Yet the result will still have all the benefits of declarative SQL running on modern analytics databases, instead of your custom Python/R/Scala scripting machine. You’ll be able to create your own mini programs that produce 10-table “purchasing funnel” computations that connect just the right way based on configuration parameters supplied.</p> </li> </ol> <h1 id="napkins-future"> <a href="#napkins-future" class="anchor-heading" aria-labelledby="napkins-future"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Napkin’s Future </h1> <p>Napkin is utilized heavily in commercial projects both at Soostone and at our clients. We improve napkin all the time and have a long backlog of major features we will realize in the future.</p> <p>We would like to be transparent with our roadmap and are looking for ways to best communicate our plans. We’re currently maintaining a Trello board with our roadmap where we would love to hear your reactions and feedback. You can access our roadmap board at <a href="https://trello.com/b/rIbzqkFb/napkin-roadmap">Napkin Roadmap</a></p> <h1 id="next-steps"> <a href="#next-steps" class="anchor-heading" aria-labelledby="next-steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Next Steps </h1> <p><a href="/getting-started">Continue with <strong>Getting Started</strong></a></p> </div> </div> <div class="main-content-rspander"></div> <div class="search-overlay"></div> </div> <footer class="site-footer"> <div class="site-footer-lspandex"></div> <div class="site-footer-rows"> <div class="site-footer-r1"> <div class="logo white-napkin"></div> <div class="link-table"> <a href="#" class="">Documenation</a> <a href="#" class="">Community</a> <a href="#" class="">Features</a> </div> <div class="link-table"> <a href="#" class="">Use Cases</a> <a href="#" class="">About napkin</a> <a href="#" class="">Contact</a> </div> <div class="gradient-border"> <a href="#" class="link-button">Get napkin</a> </div> </div> <div class="media-bar"> <span class="media-pad"> <a href="#" class="logo fb-logo"></a> </span> <span class="media-pad"> <a href="#" class="logo linked-in-logo"></a> </span> <span class="media-pad"> <a href="#" class="logo twitter-logo"></a> </span> </div> <div class="site-footer-copy-right"> <div class="copyright"> Copyright 2021 &copy; &nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp; <a href="#">Privacy Policy</a> </div> <div class="made-with"> Made with <span class="gradient-text heart">&#x2764;</span> in NYC </div> </div> </div> <div class="site-footer-rspandex"></div> </footer> <script type="text/javascript" src="/assets/js/copy.js"></script> <script type="text/javascript" src="/assets/js/highlight-active-link.js"></script> </body> </html>
